const recommendationsSection=document.querySelector(".recommendations"),URLmain="http://localhost:3000/api/goods",basketWrapper=document.querySelector(".basket__products"),deliveryInfo=document.querySelector(".delivery-info__img"),basketResultPriceNew=document.querySelector(".basket__result-price-new"),basketResultCount=document.querySelector(".basket__result-count"),basketResultPrice=document.querySelector(".basket__result-price"),basketResultDiscount=document.querySelector(".basket__result-discount"),btnBasketDel=document.querySelector(".btn-basket-del"),basketCheckboxAll=document.querySelector(".basket__checkbox-all"),hrefSrc=window.location.href.split("/").slice(0,-1).join("/"),cardsRenderRecom=e=>{if(e){const t=document.createElement("ul");return t.classList.add("sale__list"),e.forEach(((s,n)=>{const c=document.createElement("li");c.classList.add("sale__item",`sale__item_${n+1}`),c.addEventListener("click",(e=>{localStorage.setItem("downloadableProduct",JSON.stringify(s.title)),window.location.href=`${hrefSrc}/card.html`}));let a=e[n].price,r=0;e[n].discount&&(r=e[n].discount,a=Math.round(a+a/100*r),c.classList.add("sale__item-discount"),c.dataset.text=`${e[n].discount}%`),c.insertAdjacentHTML("afterbegin",`\n                <img loading="lazy" src= http://localhost:3000/${s.image} alt="Картинка скидок" class="stock__img" width="325" height="295">\n                <div class="sale__wrapper-prices">\n                    <span class="price-sale">${e[n].price} ₽</span>\n                    <span class="price-full">${a} ₽</span>\n                </div>\n                <p class="sale__description">${e[n].title}</p>`),t.appendChild(c)})),t}},initRecommendation=()=>{fetch(URLmain).then((e=>e.json())).then((e=>e.slice(0,8))).then((e=>cardsRenderRecom(e))).then((e=>recommendationsSection.append(e))).catch((e=>{console.log(e)}))};fetch(URLmain).then((e=>e.json())).then((e=>e.slice(0,8))).then((e=>cardsRenderRecom(e))).then((e=>recommendationsSection.append(e))).catch((e=>{console.log(e)}));const ChangingQuantityGoods=()=>{},initBasket=(e,t)=>{let s=JSON.parse(localStorage.getItem("basket"))||null;if(s&&null!==s){e&&t&&(s.map((s=>{s.titleProduct==e&&("Plus"==t&&s.countProduct++,"Minus"==t&&s.countProduct--)})),localStorage.setItem("basket",JSON.stringify(s)),basketWrapper.querySelector(".basket__products-items").remove(),deliveryInfo.innerHTML="");let n=0,c=0,a=0;const r=document.createElement("div");r.classList.add("basket__products-items"),s.forEach(((e,t)=>{n+=e.countProduct,c+=e.countProduct*e.newpriceProduct,a+=e.countProduct*e.oldriceProduct;const s=document.createElement("div");s.classList.add("basket__products-item"),s.insertAdjacentHTML("afterbegin",`\n                    <input type="checkbox" name="basket" value="select item">\n                    <img src= http://localhost:3000/${e.imageProduct} alt="Картинака товара ${t}">\n                    <div class="products-items__info">\n                        <h3 class="product-title">${e.titleProduct}</h3>\n                        <p>Цвет: черный</p>\n                        <p>Оперативная память: 16 ГБ</p>\n                    </div>\n                    <div class="products-item__count">\n                        <button class="btn-subtract"></button>\n                        <span class="quantity-goods">${e.countProduct}</span>\n                        <button class="btn-increase"></button>\n                    </div>\n                    <div class="products-item__price">\n                        <span class="basket__new-price">${e.newpriceProduct} ₽</span>\n                        <span class="basket__old-price">${e.oldriceProduct} ₽</span>\n                        <a href="#" class="basket__credit">В кредит от <span>5600 ₽</span></a>\n                    </div>`),r.appendChild(s);const o=document.createElement("img");o.src=`http://localhost:3000/${e.imageProduct}`,deliveryInfo.appendChild(o)})),basketWrapper.appendChild(r),basketWrapper.querySelectorAll(".products-item__count").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest(".basket__products-item").querySelector(".product-title").innerText;if(e.target.classList.contains("btn-subtract")||e.target.closest("btn-subtract")){if(e.target.closest(".basket__products-item").querySelector(".quantity-goods").innerText<2)return;initBasket(t,"Minus")}(e.target.classList.contains("btn-increase")||e.target.closest("btn-increase"))&&initBasket(t,"Plus")}))})),basketResultCount.innerText=`Товары, ${n}  шт.`,basketResultPriceNew.innerText=`${c} ₽`,basketResultPrice.innerText=`${a} ₽`,basketResultDiscount.innerText=a-c}else{const e=document.createElement("p");e.style.color="black",e.style.fontSize="50px",e.innerText="Корзина пуста",basketWrapper.append(e),basketResultCount.innerText="Товары, 0  шт.",basketResultPrice.innerText="0 ₽",basketResultPriceNew.innerText="0 ₽",basketResultDiscount.innerText="0 ₽"}};initBasket(null,null),btnBasketDel.addEventListener("click",(e=>{e.preventDefault(),basketWrapper.querySelector(".basket__products-items")&&basketCheckboxAll.checked&&(localStorage.removeItem("basket"),basketWrapper.querySelector(".basket__products-items").remove(),basketCheckboxAll.checked=!1,deliveryInfo.innerHTML="",initBasket(null,null))}));
//# sourceMappingURL=../maps/shop.js.map
